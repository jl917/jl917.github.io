"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["8769"],{8855:function(e,s,n){n.r(s),n.d(s,{default:()=>d});var t=n(5893),r=n(65);function a(e){let s=Object.assign({h1:"h1",a:"a",h3:"h3",pre:"pre",code:"code",p:"p"},(0,r.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.h1,{id:"jest",children:[(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#jest",children:"#"}),"Jest"]}),"\n",(0,t.jsxs)(s.h3,{id:"install",children:[(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#install",children:"#"}),"Install"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"npm i --save-dev jest\n# 如果你在代码中使用了新的语法特性，而当前 Node 版本不支持，则需要使用 Babel 进行转义。\nnpm i --save-dev babel-jest @babel/core @babel/preset-env\nnpm i --save-dev identity-obj-proxy\nnpm i --save-dev react-test-renderer\nnpm i --save-dev enzyme enzyme-adapter-react-16 enzyme-to-json\nnpm i --save-dev @testing-library/react\n"})}),"\n",(0,t.jsxs)(s.h3,{id:"babelrcjs",children:[(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#babelrcjs",children:"#"}),".babelrc.js"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:'const config = {\n  presets: ["@babel/preset-env", "@babel/preset-react"],\n  plugins: [],\n};\nif (process.env.NODE_ENV === "production") {\n  config.presets.push([\n    "minify",\n    {\n      removeConsole: true,\n    },\n  ]);\n}\nmodule.exports = config;\n'})}),"\n",(0,t.jsxs)(s.h3,{id:"jestconfigjs",children:[(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#jestconfigjs",children:"#"}),"jest.config.js"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:'module.exports = {\n  testEnvironment: "node",\n  transform: {\n    "^.+\\\\.jsx?$": "babel-jest",\n  },\n  moduleNameMapper: {\n    "\\\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$": "./mocks/fileMock.js",\n    "\\\\.(css|less|styl)$": "identity-obj-proxy",\n  },\n  snapshotSerializers: ["enzyme-to-json/serializer"],\n  setupFiles: ["./setupTest.js"],\n};\n'})}),"\n",(0,t.jsxs)(s.p,{children:["VScode - ",(0,t.jsx)(s.a,{href:"https://marketplace.visualstudio.com/items?itemName=Orta.vscode-jest",rel:"noopener noreferrer",target:"_blank",children:"https://marketplace.visualstudio.com/items?itemName=Orta.vscode-jest"})]}),"\n",(0,t.jsxs)(s.p,{children:["ts-jest - ",(0,t.jsx)(s.a,{href:"https://github.com/kulshekhar/ts-jest",rel:"noopener noreferrer",target:"_blank",children:"https://github.com/kulshekhar/ts-jest"})]}),"\n",(0,t.jsxs)(s.h3,{id:"mocksfilemockjs",children:[(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#mocksfilemockjs",children:"#"}),"mocks/fileMock.js"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:"module.exports = '';\n"})}),"\n",(0,t.jsxs)(s.h3,{id:"setuptestjs",children:[(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#setuptestjs",children:"#"}),"setupTest.js"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:'import { configure } from "enzyme";\nimport Adapter from "enzyme-adapter-react-16";\nconfigure({ adapter: new Adapter() });\n'})}),"\n",(0,t.jsxs)(s.h3,{id:"基本用法",children:[(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#基本用法",children:"#"}),"基本用法"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:'import fn from "./someFunction";\ndescribe("测试描述", () => {\n  test("dao", () => {\n    expect(fn("dao")).toEqual("daodao");\n  });\n  test("lang", () => {\n    expect(fn("lang")).toEqual("langdao");\n  });\n});\n\n// 异步\n// .resolves\ntest("resolves to lemon", () => {\n  // make sure to add a return statement\n  return expect(Promise.resolve("lemon")).resolves.toBe("lemon");\n});\n// .rejects\ntest("rejects to octopus", () => {\n  // make sure to add a return statement\n  return expect(Promise.reject(new Error("octopus"))).rejects.toThrow("octopus");\n});\n'})}),"\n",(0,t.jsxs)(s.h3,{id:"比较",children:[(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#比较",children:"#"}),"比较"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBe"})," 使用 ",(0,t.jsx)(s.a,{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/is",rel:"noopener noreferrer",target:"_blank",children:"Object.is"})," 判断是否严格相等。"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toEqual"})," 递归检查对象或数组的每个字段。"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBeNull"})," 只匹配 ",(0,t.jsx)(s.code,{children:"null"}),"。"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBeUndefined"})," 只匹配 ",(0,t.jsx)(s.code,{children:"undefined"}),"。"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBeDefined"})," 只匹配非 ",(0,t.jsx)(s.code,{children:"undefined"}),"。"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBeTruthy"})," 只匹配真。"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBeFalsy"})," 只匹配假。"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBeGreaterThan"})," 实际值大于期望。"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBeGreaterThanOrEqual"})," 实际值大于或等于期望值"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBeLessThan"})," 实际值小于期望值。"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBeLessThanOrEqual"})," 实际值小于或等于期望值。"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBeCloseTo"})," 比较浮点数的值，避免误差。"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toMatch"})," 正则匹配。"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toContain"})," 判断数组中是否包含指定项。"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:".toHaveProperty(keyPath, value)"})," 判断对象中是否包含指定属性。"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toThrow"})," 判断是否抛出指定的异常。"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBeInstanceOf"})," 判断对象是否是某个类的实例，底层使用 ",(0,t.jsx)(s.code,{children:"instanceof"}),"。"]}),"\n",(0,t.jsxs)(s.h3,{id:"extends-sample",children:[(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#extends-sample",children:"#"}),"extends sample"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:'const expect = require("expect");\n\nconst toMatchAllText = (props, textList) => {\n  let isMatchText = true;\n  let noMatchtextList = [];\n  for (const text of textList) {\n    try {\n      props.getByText(text);\n    } catch {\n      isMatchText = false;\n      noMatchtextList.push(text);\n    }\n  }\n  if (isMatchText) {\n    return {\n      message: () => "success",\n      pass: true,\n    };\n  }\n  return {\n    message: () => `not match some text "${noMatchtextList.join(", ")}"`,\n    pass: false,\n  };\n};\n\nexpect.extend({ toMatchAllText: toMatchAllText });\n\n// expect(props.getByTestId(\'01\').innerHTML).toMatchAllText(\'헤딩 타이틀\');\n'})})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,r.ah)(),e.components);return s?(0,t.jsx)(s,Object.assign({},e,{children:(0,t.jsx)(a,e)})):a(e)}let d=c;c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["note%2Ftest%2Fjest.md"]={toc:[{id:"install",text:"Install",depth:3},{id:"babelrcjs",text:".babelrc.js",depth:3},{id:"jestconfigjs",text:"jest.config.js",depth:3},{id:"mocksfilemockjs",text:"mocks/fileMock.js",depth:3},{id:"setuptestjs",text:"setupTest.js",depth:3},{id:"基本用法",text:"基本用法",depth:3},{id:"比较",text:"比较",depth:3},{id:"extends-sample",text:"extends sample",depth:3}],title:"Jest",headingTitle:"Jest",frontmatter:{}}}}]);