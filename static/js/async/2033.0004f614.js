"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["2033"],{283:function(s,n,e){e.r(n),e.d(n,{default:()=>o});var i=e(5893),r=e(65);function l(s){let n={a:"a",code:"code",h1:"h1",h2:"h2",h5:"h5",pre:"pre",span:"span",...(0,r.a)(),...s.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"fine-tuning-예제",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#fine-tuning-예제",children:"#"}),"Fine-tuning 예제"]}),"\n",(0,i.jsxs)(n.h5,{id:"openapi튜닝-샘플",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#openapi튜닝-샘플",children:"#"}),"openapi튜닝 샘플"]}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(n.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-json",children:[(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"{"})}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:'  "messages"'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" ["})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"    { "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:'"role"'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "system"'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:' "content"'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "<放入系统讯息>"'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" }"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"    { "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:'"role"'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "user"'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:' "content"'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "<放入使用者的问题>"'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" }"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"    { "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:'"role"'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "assistant"'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:' "content"'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "<放入理想的回答>."'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" }"})]}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  ]"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,i.jsxs)(n.h2,{id:"데이터셋",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#데이터셋",children:"#"}),"데이터셋"]}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(n.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-json",children:[(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// lora/data/train.jsonl"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"{"})}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:'  "messages"'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" ["})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"    { "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:'"role"'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "user"'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:' "content"'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "How many districts and townships does the market cover"'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" }"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"    { "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:'"role"'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "assistant"'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:' "content"'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "The market covers **4 districts (가도)** and **8 townships (향)**."'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" }"})]}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  ]"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,i.jsxs)(n.h2,{id:"설치",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#설치",children:"#"}),"설치"]}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(n.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-sh",children:[(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"pip"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" install"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" -U"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" huggingface_hub"})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" HF_ENDPOINT"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"https://hf-mirror.com"})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hf"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" download"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" Qwen/Qwen2.5-0.5B-Instruct"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" --local-dir"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" qwen2.5-0.5B"})]}),"\n",(0,i.jsx)(n.span,{className:"line"}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"git"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" clone"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" git@github.com:ml-explore/mlx-examples.git"})]}),"\n",(0,i.jsx)(n.span,{className:"line"}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"pip"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" install"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" mlx-lm"})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"pip"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" install"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" transformers"})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"pip"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" install"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" torch"})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"pip"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" install"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" numpy"})]}),"\n",(0,i.jsx)(n.span,{className:"line"}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"## 모델 트레이닝"})}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"mlx_lm.lora"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" --model"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" /Users/julong/Documents/model/qwen2.5-0.5B"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" --train"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" --data"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" ./data"})]}),"\n",(0,i.jsx)(n.span,{className:"line"}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"## 모델 합병"})}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"mlx_lm.fuse"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" --model"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" /Users/julong/Documents/model/qwen2.5-0.5B"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" --adapter-path"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" adapters"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" --save-path"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" /Users/julong/Documents/model/qwen2.5-0.5B-julong"})]}),"\n",(0,i.jsx)(n.span,{className:"line"}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"## 테스트 원본"})}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"mlx_lm.generate"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" --model"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" /Users/julong/Documents/model/qwen2.5-0.5B"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" --prompt"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "고양이는 어떤 동물인가요?"'})]}),"\n",(0,i.jsx)(n.span,{className:"line"}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"## 테스트 튜닝이후"})}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"mlx_lm.generate"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" --model"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" /Users/julong/Documents/model/qwen2.5-0.5B-julong"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" --prompt"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "고양이는 어떤 동물인가요?"'})]}),"\n",(0,i.jsx)(n.span,{className:"line"}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"## GGUF형식으로 변환 및"})}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"git"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" clone"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" https://github.com/ggerganov/llama.cpp"})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"cd"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" llama.cpp"})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"pip"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" install"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" -r"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" requirements.txt"})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"./convert_hf_to_gguf.py"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" --outtype"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" f16"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" /Users/julong/Documents/model/qwen2.5-0.5B-julong"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" --outfile"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" /Users/julong/Documents/model/qwen2.5-0.5B-julong/qwen2.5-0.5B-julong.gguf"})]}),"\n",(0,i.jsx)(n.span,{className:"line"}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"## Ollama에 추가"})}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"echo"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'FROM /Users/julong/Documents/model/qwen2.5-0.5B-julong/qwen2.5-0.5B-julong.gguf'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:" >"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" /Users/julong/Documents/model/qwen2.5-0.5B-julong/Modelfile"})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"ollama"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" create"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" julong-model"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" -f"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" /Users/julong/Documents/model/qwen2.5-0.5B-julong/Modelfile"})]})]})})})]})}function o(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}={...(0,r.a)(),...s.components};return n?(0,i.jsx)(n,{...s,children:(0,i.jsx)(l,{...s})}):l(s)}o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["artificialIntelligence%2F61-FineTuning-sample.md"]={toc:[{id:"데이터셋",text:"데이터셋",depth:2},{id:"설치",text:"설치",depth:2}],title:"Fine-tuning 예제",headingTitle:"Fine-tuning 예제",frontmatter:{}}}}]);