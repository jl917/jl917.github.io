"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["8375"],{6632:function(e,r,n){n.r(r),n.d(r,{default:()=>l});var s=n(5893),i=n(65);function h(e){let r=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",ul:"ul",li:"li"},(0,i.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.h1,{id:"测试最佳实践中文",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#测试最佳实践中文",children:"#"}),"测试最佳实践(中文)"]}),"\n",(0,s.jsx)(r.p,{children:"一段测试代码需要做到让人一眼就能看出其目的。"}),"\n",(0,s.jsxs)(r.h2,{id:"方法",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#方法",children:"#"}),"方法"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"3 个部分(测试什么/什么环境/期望结果)"}),"\n",(0,s.jsx)(r.li,{children:"AAA 模式构造内容(Arrange/Act/Assert 准备/执行/断言)"}),"\n",(0,s.jsxs)(r.li,{children:["描述期望(Bdd 形式断言) ",(0,s.jsx)(r.a,{href:"https://jestjs.io/docs/expect#expectextendmatchers",rel:"noopener noreferrer",target:"_blank",children:"https://jestjs.io/docs/expect#expectextendmatchers"})]}),"\n",(0,s.jsx)(r.li,{children:"TDD"}),"\n",(0,s.jsx)(r.li,{children:"UI 与功能分离(AAA)"}),"\n",(0,s.jsx)(r.li,{children:"测试用例标签(npx jest -t=#dao)"}),"\n"]}),"\n",(0,s.jsxs)(r.h2,{id:"mock",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#mock",children:"#"}),"mock"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"优先使用真实数据， 特定情况下使用 mock"}),"\n",(0,s.jsx)(r.li,{children:"mock 尽量与真实数据同步"}),"\n",(0,s.jsxs)(r.li,{children:["工具","\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"sinon"}),"\n",(0,s.jsx)(r.li,{children:"test double"}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://www.npmjs.com/package/faker",rel:"noopener noreferrer",target:"_blank",children:"https://www.npmjs.com/package/faker"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.h2,{id:"type",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#type",children:"#"}),"type"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"基于属性的测试， 测试输入的多种组合"}),"\n"]}),"\n",(0,s.jsxs)(r.h2,{id:"dom-tip",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#dom-tip",children:"#"}),"DOM Tip"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"使用不太容易改变的属性去查询 HTML 元素"}),"\n"]}),"\n",(0,s.jsxs)(r.h2,{id:"避免",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#避免",children:"#"}),"避免"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"坚持 public 方法, 减少 private 方法"}),"\n",(0,s.jsx)(r.li,{children:"尽量使用最短的 Snapshot"}),"\n",(0,s.jsx)(r.li,{children:"尽量避免全局的 fixtures 和 seeds(每条测试需要在它自己的 DB 行中运行避免互相污染)"}),"\n",(0,s.jsx)(r.li,{children:"不要 catch 错误而是 expect"}),"\n",(0,s.jsxs)(r.li,{children:["不要 sleep，使用框架内置的对 async 事件的支持。并且尝试提效。(",(0,s.jsx)(r.a,{href:"https://testing-library.com/docs/guide-disappearance/",rel:"noopener noreferrer",target:"_blank",children:"https://testing-library.com/docs/guide-disappearance/"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(r.h2,{id:"手动道具",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#手动道具",children:"#"}),"手动道具"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["lighthouse ",(0,s.jsx)(r.a,{href:"https://developers.google.com/web/tools/lighthouse/",rel:"noopener noreferrer",target:"_blank",children:"https://developers.google.com/web/tools/lighthouse/"})]}),"\n",(0,s.jsxs)(r.li,{children:["pagespeed ",(0,s.jsx)(r.a,{href:"https://developers.google.com/speed/pagespeed/insights/",rel:"noopener noreferrer",target:"_blank",children:"https://developers.google.com/speed/pagespeed/insights/"})]}),"\n"]}),"\n",(0,s.jsxs)(r.h2,{id:"e2e-httpsgithubcompuppeteerpuppeteer",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#e2e-httpsgithubcompuppeteerpuppeteer",children:"#"}),"E2E (",(0,s.jsx)(r.a,{href:"https://github.com/puppeteer/puppeteer",rel:"noopener noreferrer",target:"_blank",children:"https://github.com/puppeteer/puppeteer"}),")"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"写几个跨越整个系统的端到端测试"}),"\n",(0,s.jsx)(r.li,{children:"通过复用登录凭证提速 E2E 测试"}),"\n",(0,s.jsx)(r.li,{children:"创建一个 E2E 冒烟测试，仅仅走一遍网站地图"}),"\n"]}),"\n",(0,s.jsxs)(r.h2,{id:"测试报告",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#测试报告",children:"#"}),"测试报告"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["将测试以实时协作文档的形式公开(Storybook) ",(0,s.jsx)(r.a,{href:"https://storybook.js.org/addons/@storybook/addon-jest",rel:"noopener noreferrer",target:"_blank",children:"https://storybook.js.org/addons/@storybook/addon-jest"})]}),"\n",(0,s.jsx)(r.li,{children:"检查覆盖率报告，以发现未覆盖的区域和其他奇怪的地方(coverage)"}),"\n",(0,s.jsx)(r.li,{children:"使用「变异测试」度量逻辑覆盖率????"}),"\n",(0,s.jsx)(r.li,{children:"使用 Test linter 防止测试代码问题"}),"\n"]}),"\n",(0,s.jsxs)(r.h2,{id:"ci-以及其他",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#ci-以及其他",children:"#"}),"CI 以及其他"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"丰富你的 linter 并丢弃有 lint 问题的构建"}),"\n",(0,s.jsx)(r.li,{children:"通过本地的开发 CI 来缩短反馈循环(husky)"}),"\n",(0,s.jsx)(r.li,{children:"在真实的生产环境镜像中执行端到端测试"}),"\n",(0,s.jsx)(r.li,{children:"并行测试工作"}),"\n",(0,s.jsxs)(r.li,{children:["使用许可证和抄袭检查避免法务问题 (",(0,s.jsx)(r.a,{href:"https://www.npmjs.com/package/license-checker",rel:"noopener noreferrer",target:"_blank",children:"https://www.npmjs.com/package/license-checker"}),")"]}),"\n",(0,s.jsx)(r.li,{children:"持续检查有漏洞的依赖"}),"\n",(0,s.jsx)(r.li,{children:"自动升级依赖????"}),"\n",(0,s.jsx)(r.li,{children:"使用多个 Node 版本执行同一个 CI 流程(质量检查是用于发现意外，你覆盖的部分越多，你就越可能尽早地发现问题。 在开发包或运行具有各种配置和 Node 版本的多客户生产环境时，CI 必须在所有配置的组合上运行测试管道。)"}),"\n"]})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:r}=Object.assign({},(0,i.ah)(),e.components);return r?(0,s.jsx)(r,Object.assign({},e,{children:(0,s.jsx)(h,e)})):h(e)}let l=t;t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["note%2Ftest%2Ftest.md"]={toc:[{id:"方法",text:"方法",depth:2},{id:"mock",text:"mock",depth:2},{id:"type",text:"type",depth:2},{id:"dom-tip",text:"DOM Tip",depth:2},{id:"避免",text:"避免",depth:2},{id:"手动道具",text:"手动道具",depth:2},{id:"e2e-httpsgithubcompuppeteerpuppeteer",text:"E2E (https://github.com/puppeteer/puppeteer)",depth:2},{id:"测试报告",text:"测试报告",depth:2},{id:"ci-以及其他",text:"CI 以及其他",depth:2}],title:"测试最佳实践(中文)",headingTitle:"测试最佳实践(中文)",frontmatter:{}}}}]);