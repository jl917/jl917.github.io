"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["7978"],{5029:function(e,s,n){n.r(s);var t=n(85893),r=n(50065);function a(e){let s=Object.assign({h1:"h1",a:"a",h3:"h3",pre:"pre",code:"code",p:"p"},(0,r.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.h1,{id:"jest",children:[(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#jest",children:"#"}),"Jest"]}),"\n",(0,t.jsxs)(s.h3,{id:"install",children:[(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#install",children:"#"}),"Install"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",meta:"",children:"npm i --save-dev jest\n# \u5982\u679C\u4F60\u5728\u4EE3\u7801\u4E2D\u4F7F\u7528\u4E86\u65B0\u7684\u8BED\u6CD5\u7279\u6027\uFF0C\u800C\u5F53\u524D Node \u7248\u672C\u4E0D\u652F\u6301\uFF0C\u5219\u9700\u8981\u4F7F\u7528 Babel \u8FDB\u884C\u8F6C\u4E49\u3002\nnpm i --save-dev babel-jest @babel/core @babel/preset-env\nnpm i --save-dev identity-obj-proxy\nnpm i --save-dev react-test-renderer\nnpm i --save-dev enzyme enzyme-adapter-react-16 enzyme-to-json\nnpm i --save-dev @testing-library/react\n"})}),"\n",(0,t.jsxs)(s.h3,{id:"babelrcjs",children:[(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#babelrcjs",children:"#"}),".babelrc.js"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",meta:"",children:'const config = {\n  presets: ["@babel/preset-env", "@babel/preset-react"],\n  plugins: [],\n};\nif (process.env.NODE_ENV === "production") {\n  config.presets.push([\n    "minify",\n    {\n      removeConsole: true,\n    },\n  ]);\n}\nmodule.exports = config;\n'})}),"\n",(0,t.jsxs)(s.h3,{id:"jestconfigjs",children:[(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#jestconfigjs",children:"#"}),"jest.config.js"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",meta:"",children:'module.exports = {\n  testEnvironment: "node",\n  transform: {\n    "^.+\\\\.jsx?$": "babel-jest",\n  },\n  moduleNameMapper: {\n    "\\\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$": "./mocks/fileMock.js",\n    "\\\\.(css|less|styl)$": "identity-obj-proxy",\n  },\n  snapshotSerializers: ["enzyme-to-json/serializer"],\n  setupFiles: ["./setupTest.js"],\n};\n'})}),"\n",(0,t.jsxs)(s.p,{children:["VScode - ",(0,t.jsx)(s.a,{href:"https://marketplace.visualstudio.com/items?itemName=Orta.vscode-jest",target:"_blank",rel:"noopener noreferrer",children:"https://marketplace.visualstudio.com/items?itemName=Orta.vscode-jest"})]}),"\n",(0,t.jsxs)(s.p,{children:["ts-jest - ",(0,t.jsx)(s.a,{href:"https://github.com/kulshekhar/ts-jest",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/kulshekhar/ts-jest"})]}),"\n",(0,t.jsxs)(s.h3,{id:"mocksfilemockjs",children:[(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#mocksfilemockjs",children:"#"}),"mocks/fileMock.js"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",meta:"",children:"module.exports = '';\n"})}),"\n",(0,t.jsxs)(s.h3,{id:"setuptestjs",children:[(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#setuptestjs",children:"#"}),"setupTest.js"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",meta:"",children:'import { configure } from "enzyme";\nimport Adapter from "enzyme-adapter-react-16";\nconfigure({ adapter: new Adapter() });\n'})}),"\n",(0,t.jsxs)(s.h3,{id:"\u57FA\u672C\u7528\u6CD5",children:[(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#\u57FA\u672C\u7528\u6CD5",children:"#"}),"\u57FA\u672C\u7528\u6CD5"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",meta:"",children:'import fn from "./someFunction";\ndescribe("\u6D4B\u8BD5\u63CF\u8FF0", () => {\n  test("dao", () => {\n    expect(fn("dao")).toEqual("daodao");\n  });\n  test("lang", () => {\n    expect(fn("lang")).toEqual("langdao");\n  });\n});\n\n// \u5F02\u6B65\n// .resolves\ntest("resolves to lemon", () => {\n  // make sure to add a return statement\n  return expect(Promise.resolve("lemon")).resolves.toBe("lemon");\n});\n// .rejects\ntest("rejects to octopus", () => {\n  // make sure to add a return statement\n  return expect(Promise.reject(new Error("octopus"))).rejects.toThrow("octopus");\n});\n'})}),"\n",(0,t.jsxs)(s.h3,{id:"\u6BD4\u8F83",children:[(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#\u6BD4\u8F83",children:"#"}),"\u6BD4\u8F83"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBe"})," \u4F7F\u7528 ",(0,t.jsx)(s.a,{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/is",target:"_blank",rel:"noopener noreferrer",children:"Object.is"})," \u5224\u65AD\u662F\u5426\u4E25\u683C\u76F8\u7B49\u3002"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toEqual"})," \u9012\u5F52\u68C0\u67E5\u5BF9\u8C61\u6216\u6570\u7EC4\u7684\u6BCF\u4E2A\u5B57\u6BB5\u3002"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBeNull"})," \u53EA\u5339\u914D ",(0,t.jsx)(s.code,{children:"null"}),"\u3002"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBeUndefined"})," \u53EA\u5339\u914D ",(0,t.jsx)(s.code,{children:"undefined"}),"\u3002"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBeDefined"})," \u53EA\u5339\u914D\u975E ",(0,t.jsx)(s.code,{children:"undefined"}),"\u3002"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBeTruthy"})," \u53EA\u5339\u914D\u771F\u3002"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBeFalsy"})," \u53EA\u5339\u914D\u5047\u3002"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBeGreaterThan"})," \u5B9E\u9645\u503C\u5927\u4E8E\u671F\u671B\u3002"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBeGreaterThanOrEqual"})," \u5B9E\u9645\u503C\u5927\u4E8E\u6216\u7B49\u4E8E\u671F\u671B\u503C"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBeLessThan"})," \u5B9E\u9645\u503C\u5C0F\u4E8E\u671F\u671B\u503C\u3002"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBeLessThanOrEqual"})," \u5B9E\u9645\u503C\u5C0F\u4E8E\u6216\u7B49\u4E8E\u671F\u671B\u503C\u3002"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBeCloseTo"})," \u6BD4\u8F83\u6D6E\u70B9\u6570\u7684\u503C\uFF0C\u907F\u514D\u8BEF\u5DEE\u3002"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toMatch"})," \u6B63\u5219\u5339\u914D\u3002"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toContain"})," \u5224\u65AD\u6570\u7EC4\u4E2D\u662F\u5426\u5305\u542B\u6307\u5B9A\u9879\u3002"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:".toHaveProperty(keyPath, value)"})," \u5224\u65AD\u5BF9\u8C61\u4E2D\u662F\u5426\u5305\u542B\u6307\u5B9A\u5C5E\u6027\u3002"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toThrow"})," \u5224\u65AD\u662F\u5426\u629B\u51FA\u6307\u5B9A\u7684\u5F02\u5E38\u3002"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"toBeInstanceOf"})," \u5224\u65AD\u5BF9\u8C61\u662F\u5426\u662F\u67D0\u4E2A\u7C7B\u7684\u5B9E\u4F8B\uFF0C\u5E95\u5C42\u4F7F\u7528 ",(0,t.jsx)(s.code,{children:"instanceof"}),"\u3002"]}),"\n",(0,t.jsxs)(s.h3,{id:"extends-sample",children:[(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#extends-sample",children:"#"}),"extends sample"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",meta:"",children:'const expect = require("expect");\n\nconst toMatchAllText = (props, textList) => {\n  let isMatchText = true;\n  let noMatchtextList = [];\n  for (const text of textList) {\n    try {\n      props.getByText(text);\n    } catch {\n      isMatchText = false;\n      noMatchtextList.push(text);\n    }\n  }\n  if (isMatchText) {\n    return {\n      message: () => "success",\n      pass: true,\n    };\n  }\n  return {\n    message: () => `not match some text "${noMatchtextList.join(", ")}"`,\n    pass: false,\n  };\n};\n\nexpect.extend({ toMatchAllText: toMatchAllText });\n\n// expect(props.getByTestId(\'01\').innerHTML).toMatchAllText(\'\uD5E4\uB529 \uD0C0\uC774\uD2C0\');\n'})})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,r.ah)(),e.components);return s?(0,t.jsx)(s,Object.assign({},e,{children:(0,t.jsx)(a,e)})):a(e)}s.default=c,c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["web%2Ftest%2Fjest.md"]={toc:[{id:"install",text:"Install",depth:3},{id:"babelrcjs",text:".babelrc.js",depth:3},{id:"jestconfigjs",text:"jest.config.js",depth:3},{id:"mocksfilemockjs",text:"mocks/fileMock.js",depth:3},{id:"setuptestjs",text:"setupTest.js",depth:3},{id:"\u57FA\u672C\u7528\u6CD5",text:"\u57FA\u672C\u7528\u6CD5",depth:3},{id:"\u6BD4\u8F83",text:"\u6BD4\u8F83",depth:3},{id:"extends-sample",text:"extends sample",depth:3}],title:"Jest",frontmatter:{}}}}]);