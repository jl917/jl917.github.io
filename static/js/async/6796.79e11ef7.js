"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["6796"],{87422:function(e,n,t){t.r(n);var i=t(85893),r=t(50065);function s(e){let n=Object.assign({h1:"h1",a:"a",h3:"h3",ul:"ul",li:"li",h2:"h2",p:"p",del:"del",pre:"pre",code:"code",img:"img"},(0,r.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"reconciler",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#reconciler",children:"#"}),"Reconciler"]}),"\n",(0,i.jsxs)(n.h3,{id:"\uC5ED\uD560",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\uC5ED\uD560",children:"#"}),"\uC5ED\uD560"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Function\uB610\uB294 class\uCEF4\uD3EC\uB10C\uD2B8\uC758 render \uD568\uC218\uB97C \uC2E4\uD589\uD574\uC11C jsx\uB97C vdom\uC73C\uB85C \uBCC0\uACBD"}),"\n",(0,i.jsx)(n.li,{children:"\uC0C8\uB85C\uC6B4 vdom\uACFC \uAE30\uC874 vdom\uC744 \uBE44\uAD50\uD55C\uB2E4."}),"\n",(0,i.jsx)(n.li,{children:"diff\uD1B5\uD574\uC11C \uBCC0\uD654\uD55C \uBD80\uBD84\uC744 \uCCB4\uD06C\uD55C\uB2E4."}),"\n",(0,i.jsx)(n.li,{children:"renderer\uB97C \uD1B5\uD574\uC11C DOM\uC744 \uD654\uBA74\uC5D0 \uBFCC\uB824\uC900\uB2E4."}),"\n"]}),"\n","\n",(0,i.jsxs)(n.h3,{id:"fiber\uAD00\uB828-\uD0DC\uADF8-\uC124\uBA85",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#fiber\uAD00\uB828-\uD0DC\uADF8-\uC124\uBA85",children:"#"}),"fiber\uAD00\uB828 \uD0DC\uADF8 \uC124\uBA85."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["type","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"FunctionComponent \u21D2 \uD568\uC218\uC790\uCCB4"}),"\n",(0,i.jsx)(n.li,{children:"ClassComponent \u21D2 \uD074\uB798\uC2A4"}),"\n",(0,i.jsx)(n.li,{children:"HostComponent \u21D2 tagName"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["tag","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"FunctionComponent"}),"\n",(0,i.jsx)(n.li,{children:"ClassComponent"}),"\n",(0,i.jsx)(n.li,{children:"HostComponent"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["effectTag","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Placement"}),"\n",(0,i.jsx)(n.li,{children:"Update"}),"\n",(0,i.jsx)(n.li,{children:"PlacementAndUpdate"}),"\n",(0,i.jsx)(n.li,{children:"Deletion"}),"\n",(0,i.jsx)(n.li,{children:"Passive"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"effectList(firstEffect, nextEffect, lastEffect)"}),"\n",(0,i.jsx)(n.li,{children:"stateNode => DOM\uAC1D\uCCB4 \uC800\uC7A5."}),"\n"]}),"\n","\n",(0,i.jsxs)(n.h3,{id:"\uACFC\uC815",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\uACFC\uC815",children:"#"}),"\uACFC\uC815"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["render","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"beginWork"}),"\n",(0,i.jsx)(n.li,{children:"completeWork"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["commit","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"before Mutation"}),"\n",(0,i.jsx)(n.li,{children:"mutation"}),"\n",(0,i.jsx)(n.li,{children:"layout"}),"\n"]}),"\n"]}),"\n"]}),"\n","\n",(0,i.jsxs)(n.h2,{id:"render\uB2E8\uACC4",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#render\uB2E8\uACC4",children:"#"}),"render\uB2E8\uACC4"]}),"\n",(0,i.jsxs)(n.h3,{id:"beginwork",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#beginwork",children:"#"}),"beginWork"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"(mount)fiber.tag\uC5D0 \uB530\uB77C \uC11C\uB85C \uB2E4\uB978 Fiber\uB178\uB4DC \uC0DD\uC131."}),"\n",(0,i.jsx)(n.li,{children:"(update) \uB9CC\uC57D current\uAC00 \uCD5C\uC801\uD654 \uB420\uC218 \uC788\uB2E4\uBA74 current\uB97C \uADF8\uB300\uB85C \uC0AC\uC6A9(Diff)"}),"\n",(0,i.jsx)(n.li,{children:"fiber\uC5D0 EffectTag\uC0DD\uC131"}),"\n"]}),"\n","\n",(0,i.jsxs)(n.h3,{id:"completework",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#completework",children:"#"}),"completeWork"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"(mount)fiber.stateNode\uC5D0 \uAD00\uB828\uB41C DOM\uB178\uB4DC \uC0DD\uC131"}),"\n",(0,i.jsx)(n.li,{children:"(mount)children DOM\uB178\uB4DC\uB97C \uC0DD\uC131\uB41C fiber.stateNode DOM\uB178\uB4DC\uC5D0 insert"}),"\n",(0,i.jsx)(n.li,{children:"(mount) props \uCC98\uB9AC"}),"\n",(0,i.jsx)(n.li,{children:"(update) fiber.updateQueue\uCC98\uB9AC"}),"\n",(0,i.jsx)(n.li,{children:"(update) props diff \uCC98\uB9AC\uD6C4 fiber.pendingProps\uC5D0 \uC800\uC7A5."}),"\n",(0,i.jsx)(n.li,{children:"effectTag \uC0DD\uC131\uB41C fiber\uC5D0 \uB300\uD574\uC11C effectList\uC5D0 \uCD94\uAC00."}),"\n"]}),"\n","\n",(0,i.jsxs)(n.h2,{id:"commit",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#commit",children:"#"}),"commit"]}),"\n",(0,i.jsxs)(n.h3,{id:"commit-start",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#commit-start",children:"#"}),"commit start"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.del,{children:"effectList\uC911 Passive \uD0DC\uADF8\uAC00 \uC874\uC7AC\uD560 \uACBD\uC6B0 flushPassiveEffects(Immediate) \uC2E4\uD589."})}),"\n","\n",(0,i.jsxs)(n.h3,{id:"before-mutation-commitbeforemutationeffects",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#before-mutation-commitbeforemutationeffects",children:"#"}),"before mutation (commitBeforeMutationEffects)"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"DOM\uB178\uB4DC \uB79C\uB354/\uC0AD\uC81C\uD6C4 focus, blur \uAD00\uB828 \uB85C\uC9C1\uCC98\uB9AC."}),"\n",(0,i.jsx)(n.li,{children:"getSnapshotBeforeUpdate(ClassComponent)"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.del,{children:"flashPassiveEffects (Normal)"})}),"\n"]}),"\n","\n",(0,i.jsxs)(n.h3,{id:"mutation-commitmutationeffects",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#mutation-commitmutationeffects",children:"#"}),"mutation (commitMutationEffects)"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["effectTag\uC5D0 \uB530\uB77C \uCC98\uB9AC","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Placement"}),"\n",(0,i.jsxs)(n.li,{children:["Update","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["FunctionComponent","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"effectList\uC5D0\uC11C \uBAA8\uB4E0 useLayoutEffect\uC758 destory \uD568\uC218 \uC2E4\uD589."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["HostComponent","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"fiber.updateQueue\uC911 \uB300\uC751\uD558\uB294 \uB0B4\uC6A9 \uD654\uBA74\uC5D0 \uB79C\uB529."}),"\n",(0,i.jsx)(n.li,{children:"fiber.pendingProps\uB0B4\uC6A9 \uD654\uBA74\uC5D0 \uB79C\uB529"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Deletion"}),"\n"]}),"\n"]}),"\n"]}),"\n","\n",(0,i.jsxs)(n.h3,{id:"layout-commitlayouteffects",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#layout-commitlayouteffects",children:"#"}),"layout (commitLayoutEffects)"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\uB77C\uC774\uD504\uC0AC\uC774\uD074 \uBC0F hook \uC2E4\uD589","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["FunctionComponent","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"useLayoutEffect \uCF5C\uBC31 \uD568\uC218 \uC2E4\uD589.(sync)"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.del,{children:"useEffect destor \uD568\uC218\uC640 \uCF5C\uBC31\uD568\uC218 \uCD08\uAE30\uD654(async)"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["classComponent","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"componentDidMount, componentDidUpdate"}),"\n",(0,i.jsx)(n.li,{children:"this.setState\uC758 \uCF5C\uBC31\uD568\uC218 \uC2E4\uD589."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["HostRoot","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"render fn \uCF5C\uBC31\uD568\uC218 \uC2E4\uD589."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"DOM Instance\uC5D0 \uB530\uB77C ref\uC5C5\uB370\uC774\uD2B8"}),"\n",(0,i.jsx)(n.li,{children:"current Fiber \uD2B8\uB9AC \uBCC0\uD658"}),"\n"]}),"\n","\n",(0,i.jsxs)(n.h3,{id:"layout-after",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#layout-after",children:"#"}),"layout After"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"fushPassiveEffects \uC2E4\uD589(useEffect destor \uBC0F useEffect callback)"}),"\n",(0,i.jsx)(n.li,{children:"flushSyncCallbackQueue \uC2E4\uD589(\uC608: useLayoutEffect \uB0B4\uBD80\uC5D0 \uC0AC\uC6A9\uD55C setState)"}),"\n"]}),"\n","\n",(0,i.jsxs)(n.h2,{id:"hostconfig-\uC678\uBD80-apireact-dom-\uBE4C\uB4DC\uC2DC-\uD574\uB2F9-\uBD80\uBD84-\uD568\uAED8-\uBE4C\uB4DC",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#hostconfig-\uC678\uBD80-apireact-dom-\uBE4C\uB4DC\uC2DC-\uD574\uB2F9-\uBD80\uBD84-\uD568\uAED8-\uBE4C\uB4DC",children:"#"}),"hostConfig \uC678\uBD80 API(react-dom \uBE4C\uB4DC\uC2DC \uD574\uB2F9 \uBD80\uBD84 \uD568\uAED8 \uBE4C\uB4DC)"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",meta:"",children:'import ReactReconciler from "react-reconciler";\n\nconst hostConfig = {\n  now: Date.now,\n  getRootHostContext: () => {},\n  clearContainer: () => {},\n  prepareForCommit: () => {},\n  resetAfterCommit: () => {},\n  getChildHostContext: () => {},\n  shouldSetTextContent: () => {},\n  createInstance: () => {},\n  createTextInstance: () => {},\n  appendInitialChild: () => {},\n  appendChild: () => {},\n  finalizeInitialChildren: () => {},\n  supportsMutation: true,\n  appendChildToContainer: () => {},\n  prepareUpdate = () => {},\n  commitUpdate = () => {},\n  commitTextUpdate = () => {},\n  removeChild = () => {},\n}\nconst ReactReconcilerInst = ReactReconciler(hostConfig);\n\nexport const render = (reactElement, domElement, callback) => {\n\n  if (!domElement._rootContainer) {\n    console.log(ReactReconcilerInst);\n    domElement._rootContainer = ReactReconcilerInst.createContainer(domElement);\n  }\n  // \uCEE8\uD14C\uC774\uB108 \uC5C5\uB370\uC774\uD2B8\n  return ReactReconcilerInst.updateContainer(reactElement, domElement._rootContainer, null, callback);\n}\n\nexport default {\n  render\n}\n// "react-reconciler": "0.26.2",\n// "react": "17.0.2",\n'})}),"\n","\n",(0,i.jsxs)(n.h3,{id:"effectlist--subtreeflags",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#effectlist--subtreeflags",children:"#"}),"effectList => subtreeFlags"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"effectList\uC778 \uACBD\uC6B0"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://raw.githubusercontent.com/jl917/jl917.github.io/master/img/2022/08/03/20220803212122.png",alt:""})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"subtreeFlags"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://raw.githubusercontent.com/jl917/jl917.github.io/master/img/2022/08/03/20220803212256.png",alt:""})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"B\uC758 effect\uB294 Passive\uC774\uACE0 bubble\uC744 \uD1B5\uD574\uC11C A\uB85C \uC774\uB3D9, A.subtreeFlags\uC5D0 Passive\uD3EC\uD568."}),"\n",(0,i.jsx)(n.li,{children:"E\uC758 effect\uB294 Placement\uC774\uACE0 bubble\uD1B5\uD574\uC11C D\uB85C \uC774\uB3D9, D.subtreeFlags\uC5D0 Placement\uD3EC\uD568."}),"\n",(0,i.jsx)(n.li,{children:"D.subtreeFlags\uC5D0 Placement\uAC00 bubble\uD1B5\uD574\uC11C C\uB85C \uC774\uB3D9"}),"\n",(0,i.jsx)(n.li,{children:"C\uC758 effect\uB294 Update\uC774\uACE0, C.subtreeFlags\uC758 Placement\uAC00 bubble\uD1B5\uD574\uC11C A\uB85C"}),"\n",(0,i.jsx)(n.li,{children:"A.subtreeFlags\uB294 Passive\u3001Placement\u3001Update\uB97C \uD3EC\uD568."}),"\n",(0,i.jsx)(n.li,{children:"commit\uB2E8\uACC4\uC5D0\uC11C \uBAA8\uB4E0 tree\uB97C \uC21C\uD68C\uD558\uBA74\uC11C \uCC98\uB9AC."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://gist.github.com/jl917/059c3c47a521914cb8ed8fa2b5ff8569",target:"_blank",rel:"noopener noreferrer",children:"https://gist.github.com/jl917/059c3c47a521914cb8ed8fa2b5ff8569"})}),"\n","\n",(0,i.jsxs)(n.h3,{id:"\uCC38\uACE0",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\uCC38\uACE0",children:"#"}),"\uCC38\uACE0"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://velog.io/@dev-mish-mash/%EB%A6%AC%EC%95%A1%ED%8A%B8%EC%9D%98-%EC%A1%B0%ED%99%94Reconciliation-%EA%B3%BC%EC%A0%95-%EC%A0%95%EB%A6%AC",target:"_blank",rel:"noopener noreferrer",children:"https://velog.io/@dev-mish-mash/%EB%A6%AC%EC%95%A1%ED%8A%B8%EC%9D%98-%EC%A1%B0%ED%99%94Reconciliation-%EA%B3%BC%EC%A0%95-%EC%A0%95%EB%A6%AC"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://beta-reactjs-org-git-effects-fbopensource.vercel.app/learn/render-and-commit",target:"_blank",rel:"noopener noreferrer",children:"https://beta-reactjs-org-git-effects-fbopensource.vercel.app/learn/render-and-commit"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://agent-hunt.medium.com/hello-world-custom-react-renderer-9a95b7cd04bc",target:"_blank",rel:"noopener noreferrer",children:"https://agent-hunt.medium.com/hello-world-custom-react-renderer-9a95b7cd04bc"})})]})}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?(0,i.jsx)(n,Object.assign({},e,{children:(0,i.jsx)(s,e)})):s(e)}n.default=l,l.__RSPRESS_PAGE_META={},l.__RSPRESS_PAGE_META["web%2Freact%2Fsources%2F03.md"]={toc:[{id:"\uC5ED\uD560",text:"\uC5ED\uD560",depth:3},{id:"fiber\uAD00\uB828-\uD0DC\uADF8-\uC124\uBA85",text:"fiber\uAD00\uB828 \uD0DC\uADF8 \uC124\uBA85.",depth:3},{id:"\uACFC\uC815",text:"\uACFC\uC815",depth:3},{id:"render\uB2E8\uACC4",text:"render\uB2E8\uACC4",depth:2},{id:"beginwork",text:"beginWork",depth:3},{id:"completework",text:"completeWork",depth:3},{id:"commit",text:"commit",depth:2},{id:"commit-start",text:"commit start",depth:3},{id:"before-mutation-commitbeforemutationeffects",text:"before mutation (commitBeforeMutationEffects)",depth:3},{id:"mutation-commitmutationeffects",text:"mutation (commitMutationEffects)",depth:3},{id:"layout-commitlayouteffects",text:"layout (commitLayoutEffects)",depth:3},{id:"layout-after",text:"layout After",depth:3},{id:"hostconfig-\uC678\uBD80-apireact-dom-\uBE4C\uB4DC\uC2DC-\uD574\uB2F9-\uBD80\uBD84-\uD568\uAED8-\uBE4C\uB4DC",text:"hostConfig \uC678\uBD80 API(react-dom \uBE4C\uB4DC\uC2DC \uD574\uB2F9 \uBD80\uBD84 \uD568\uAED8 \uBE4C\uB4DC)",depth:2},{id:"effectlist--subtreeflags",text:"effectList => subtreeFlags",depth:3},{id:"\uCC38\uACE0",text:"\uCC38\uACE0",depth:3}],title:"Reconciler",frontmatter:{}}}}]);