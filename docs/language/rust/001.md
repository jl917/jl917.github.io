# 기초문법

## 요약

#### hello world

```rust
fn main() {
    let s = "hello world";
    println!("{}", s); // println! macro   标准输出macro 可以完成编译器格式检查， 更加安全
}
```

#### 타입지정

```rust
fn Foo(input1: i32, input2: u32) -> i32 {
  ...
}
```

#### use

```rust
use std::prelude::*; // std rust에서 제공하는 standard 유틸
```

#### Format

```rust
fn main() {
    println!("{}", 1); // default
    println!("{:o}", 9); // 八进制
    println!("{:x}", 255); // 十六进制 小写
    println!("{:X}", 255); // 十六进制 大写
    println!("{:p}", &0); // pointer
    println!("{:b}", 15); // 二进制
    println!("{:e}", 10000f32); // 科学计数 小写
    println!("{:E}", 10000f32); // 科学计数 大写
    println!("{:?}", "test"); // debug
    println!("{:#?}", ("test1", "test2")); // 带换行和缩进的debug
    println!("{a} {b} {b}", a = "x", b = "y"); // 命名参数
}
```

#### 변수선언

```rust
let num: i32 = 100;
let num = 100i32;

let x = 5;
x = 10; // error

let mut x = 5;
x = 10;

let x:i32;
x = 1;

let (mut a, mut b) = (1,2);
let Point {x: ref a, y: ref b} = p;

static GLOBAL:i32 = 0;
```

#### 기본 데이터 유형

```rust
let empty: () = (); // unit type
let boolean: bool = true;
let t1: char = 'x';
// u8 ~ u128
let i1: i8 = -128; // -128~127
let i2: u8 = 255; // 0~255
// f32, f64
let f1: f32 = 123.0;
let f2 = 123.0f32;
```

#### 복합 데이 유형

```rust
// tuple
let a = (1i32, false);
let b = (a, (1i32, 2i32));
let a = (0,);
let b: i32 = (0); // 표현식, tuple 아님

// struct
struct Point {
  x: i32,
  y: i32,
}
let p = Point {x: 0, y: 0};
println!("point is at {} {}",p.x, p.y);

// struct: 생략 가능
let x = 10;
let y = 20;
let p = Point {x, y};

// struct: px, py alias로 바인딩 가능
let p = Point { x: 0, y: 1 };
let Point { x: px, y: py } = p;

// struct: destruct도 가능
let Point {x, y} = p;

// struct: 语法糖, default 지정 가능
struct Point3d {
  x: i32,
  y: i32,
  z: i32,
}
fn default() -> Point3d {
  Point3d { x: 0, y: 0, z: 0 }
}
let origin = Point3d { x: 4, ..default() };

// tuple struct
struct T(i32);
let v1 = T(1);
let v2 = T{0: 1};

// enum
enum Number {
    Int(i32),
    Float(f32),
}
// Number::Int로 enum구성원에 접근
fn read_num(num: &Number) {
    match num {
        &Number::Int(value) => println!("integer {}", value),
        &Number::Float(value) => println!("float {}", value),
    }
}
fn main() {
    let n: Number = Number::Int(10);
    read_num(&n);
}
// index
enum Animal {
    dog = 1, // 선언하지 않으면 0
    cat = 200,
    tiger,
}

let x = Animal::tiger as isize;
println!("{}", x) // 201
```

#### Expression

```rust
let x = 100;
let y = 10;
let t = true;
let f = false;

println!("{}", x + y);
println!("{}", x - y);
println!("{}", x * y);
println!("{}", x / y);
println!("{}", x % y);
println!("{}", x == y);
println!("{}", x != y);
println!("{}", x < y);
println!("{}", x > y);
println!("{}", x >= y);
println!("{}", x <= y);
println!("{}", t && f);
println!("{}", t || f);
println!("{}", !t);

let mut y1 = 40;
let mut y2 = 40;
let mut y3 = 40;
let mut y4 = 40;
let mut y5 = 40;
y1 += 10;
y2 -= 10;
y3 *= 10;
y4 /= 10;
y5 %= 10;
println!("{}", y1);
println!("{}", y2);
println!("{}", y3);
println!("{}", y4);
println!("{}", y5);
```

```rust
let x: () = {
    println!("hello x");
};
x;
let y: i32 = {
    println!("hello y");
    30
};
println!("{}", y);
```

#### if else

```rust
fn func(n: i32) -> bool {
    if n < 0 {
        println!("{} is negative", n);
    } else if n > 0 {
        println!("{} is positive", n);
    } else {
        println!("{} is zero", n);
    }
    return n > 0;
}
let x = func(-3);
println!("{}", x)
```

#### loop

```rust
let mut count = 0u32;

loop {
    count += 1;
    if count == 3 {
        println!("three");
        continue;
    }

    println!("{}", count);
    if count >= 5 {
        println!("OK");
        break;
    }
}
```

#### while

```rust
let mut count = 0u32;

while count < 101 {
    if count % 15 == 0 {
        println!("fizzbuzz");
    } else if count % 3 == 0 {
        println!("fizz");
    } else if count % 5 == 0 {
        println!("buzz");
    } else {
        println!("{}", count);
    }
    count += 1;
}
```

#### for

```rust
let array = &[1, 2, 3, 4, 5];
for i in array {
    println!("is {}", i);
}
```
